<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}SubHub Mentor Portal{% endblock %}</title>

  <style>
    :root {
      --g1: #f2fffb;
      --g2: #e6fbf6;
      --g3: #baf3e8;
      --g4: #8fe6d8;

      --accent-teal: #08a094;
      --accent-teal-dark: #067d73;

      --text: #1f2d2d;
      --muted: #697f7f;

      --sidebar-bg: rgba(255,255,255,0.18);
      --sidebar-border: rgba(0,0,0,0.08);
      --card-bg: rgba(255,255,255,0.92);
    }

    html, body {
      margin: 0;
      height: 100%;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      color: var(--text);
    }

    body {
      background: linear-gradient(145deg, var(--g1) 0%, var(--g2) 35%, var(--g3) 65%, var(--g4) 100%);
      display: flex;
    }

    .app-shell {
      display: flex;
      width: 100%;
      padding: 26px;
      gap: 24px;
    }

    /* ===== SIDEBAR ===== */
    .sidebar {
      width: 260px;
      min-width: 260px;
      padding: 20px;
      background: var(--sidebar-bg);
      backdrop-filter: blur(12px);
      border-radius: 16px;
      border: 1px solid var(--sidebar-border);
      display: flex;
      flex-direction: column;
      transition: width .3s ease;
    }

    .sidebar.collapsed {
      width: 85px;
      min-width: 85px;
      padding: 20px 12px;
    }

    .brand {
      font-weight: 900;
      font-size: 19px;
      color: var(--accent-teal);
      margin-bottom: 22px;
      white-space: nowrap;
    }

    .sidebar.collapsed .brand {
      display: none;
    }

    /* ===== NAV ===== */
    .side-nav {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .side-nav a {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 12px;
      text-decoration: none;
      color: var(--text);
      font-weight: 700;
      border-radius: 12px;
      white-space: nowrap;
    }

    .side-nav a svg {
      width: 20px;
      height: 20px;
      stroke: currentColor;
      stroke-width: 2;
      fill: none;
      stroke-linecap: round;
      stroke-linejoin: round;
      flex-shrink: 0;
    }

    .side-nav a:hover {
      background: rgba(255,255,255,0.32);
      color: var(--accent-teal);
    }

    .side-nav a.active {
      background: rgba(255,255,255,0.38);
      border-left: 4px solid var(--accent-teal);
      padding-left: 8px;
      color: var(--accent-teal);
    }

    /* ===== SIDEBAR FOOTER ===== */
    .sidebar-footer {
      margin-top: auto;
      padding-top: 14px;
      border-top: 1px solid rgba(0,0,0,0.07);
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .sidebar-profile {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
      color: inherit;
      flex: 1;
      min-width: 0;
    }

    .sidebar-avatar {
      width: 46px;
      height: 46px;
      border-radius: 10px;
      object-fit: cover;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      color: var(--accent-teal);
    }

    .sidebar-user {
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .sidebar-name {
      font-weight: 800;
      font-size: 14px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .sidebar-email {
      font-size: 12px;
      color: var(--muted);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .collapse-btn {
      background: transparent;
      border: none;
      cursor: pointer;
      font-size: 18px;
      color: var(--muted);
    }

    .sidebar.collapsed .sidebar-user {
      display: none;
    }

    /* ===== MAIN ===== */
    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .main-title {
      font-size: 22px;
      font-weight: 900;
    }

    .muted {
      color: var(--muted);
      font-size: 13px;
    }

    .container {
      background: var(--card-bg);
      padding: 24px;
      border-radius: 16px;
      min-height: 200px;
    }

    @media (max-width: 1000px) {
      .sidebar { display: none; }
      .app-shell { padding: 16px; }
    }
  </style>
</head>

<body>

<div class="app-shell">

  <!-- ===== SIDEBAR ===== -->
  <aside id="sidebar" class="sidebar">

    <div class="brand">SubHub Mentor Portal</div>

    <nav class="side-nav">

      <!-- Dashboard -->
      <a href="{% url 'mentors:dashboard' %}"
         class="{% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
        <svg viewBox="0 0 24 24">
          <path d="M3 12l9-9 9 9"></path>
          <path d="M9 21V12h6v9"></path>
        </svg>
        Dashboard
      </a>

      <!-- Sessions -->
      <a href="{% url 'mentors:mentorship_sessions' %}"
         class="{% if request.resolver_match.url_name == 'mentorship_sessions' %}active{% endif %}">
        <svg viewBox="0 0 24 24">
          <line x1="8" y1="6" x2="21" y2="6"></line>
          <line x1="8" y1="12" x2="21" y2="12"></line>
          <line x1="8" y1="18" x2="21" y2="18"></line>
          <circle cx="4" cy="6" r="1"></circle>
          <circle cx="4" cy="12" r="1"></circle>
          <circle cx="4" cy="18" r="1"></circle>
        </svg>
        Sessions
      </a>

      <!-- Profile -->
      <a href="{% url 'mentors:mentor_profile' %}"
         class="{% if request.resolver_match.url_name == 'mentor_profile' %}active{% endif %}">
        <svg viewBox="0 0 24 24">
          <circle cx="12" cy="7" r="4"></circle>
          <path d="M5.5 21a6.5 6.5 0 0 1 13 0"></path>
        </svg>
        Profile
      </a>

      <!-- Logout -->
      <a href="{% url 'logout' %}">
        <svg viewBox="0 0 24 24">
          <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
          <polyline points="10 17 15 12 10 7"></polyline>
          <line x1="15" y1="12" x2="3" y2="12"></line>
        </svg>
        Logout
      </a>

    </nav>

    <!-- ===== SIDEBAR FOOTER ===== -->
    <div class="sidebar-footer">

      <a href="{% url 'mentors:mentor_profile' %}" class="sidebar-profile">
        {% if mentor_profile.profile_image %}
          <img src="{{ mentor_profile.profile_image.url }}" class="sidebar-avatar" alt="Profile">
        {% else %}
          <div class="sidebar-avatar">
            {{ mentor_profile.user.first_name|default:mentor_profile.user.username|slice:":1"|upper }}
          </div>
        {% endif %}

        <div class="sidebar-user">
          <div class="sidebar-name">
            {{ mentor_profile.user.first_name|default:mentor_profile.user.username }}
          </div>
          <div class="sidebar-email">
            {{ mentor_profile.user.email }}
          </div>
        </div>
      </a>

      <button id="collapseBtn" class="collapse-btn">â‰¡</button>
    </div>

  </aside>

  <!-- ===== MAIN ===== -->
  <main class="main">
    <div>
      <div class="main-title">{% block page_title %}{% endblock %}</div>
      <div class="muted">{% block page_subtitle %}{% endblock %}</div>
    </div>

    <div class="container">
      {% block content %}{% endblock %}
    </div>

    {% block below_content %}{% endblock %}
  </main>

</div>

<script>
  const sidebar = document.getElementById("sidebar");
  const collapseBtn = document.getElementById("collapseBtn");
  collapseBtn.onclick = () => sidebar.classList.toggle("collapsed");
</script>

</body>
</html>
